CREATE TABLE FUNCIONARIOS(
	ID_FUNC INT AUTO_INCREMENT,
	NOME_FUNC VARCHAR(100) NOT NULL,
	CPF VARCHAR(14) NOT NULL,
	USUARIO VARCHAR(20),
	SENHA VARCHAR(20),
	DT_ADM DATE,
	ID_USR_CAD INT NOT NULL,

	PRIMARY KEY(ID_FUNC)
)

CREATE TABLE MAQUINAS(
	ID_MAQ INT AUTO_INCREMENT,
	NOME_MAQ VARCHAR(100) NOT NULL,
	DT_COMPRA DATE,
	ST_MAQ BOOLEAN,
	ID_USR_CAD INT NOT NULL,

	PRIMARY KEY(ID_MAQ),
	FOREIGN KEY(ID_USR_CAD) REFERENCES FUNC(ID_FUNC)
)

CREATE TABLE NS_MAQ(
	ID_NS INT AUTO_INCREMENT,
	ID_MAQ INT NOT NULL ,
	NS_MAQ VARCHAR(30) NOT NULL,	
	ST_NS BOOLEAN,
	ID_USR_CAD INT NOT NULL,

	PRIMARY KEY(ID_NS),
	FOREIGN KEY(ID_USR_CAD) REFERENCES FUNC(ID_FUNC),
	FOREIGN KEY(ID_MAQ ) REFERENCES MAQ(ID_MAQ)
)

CREATE TABLE MOVIMENTACAO(
	ID_MOV INT AUTO_INCREMENT,
	ID_MAQ INT NOT NULL ,
	ID_FUNC INT NOT NULL,	
	ID_NS INT NOT NULL,
	TIPO_MOV BOOLEAN,
	DT_MOV DATE,

	PRIMARY KEY(ID_MOV),
	FOREIGN KEY(ID_MAQ ) REFERENCES MAQ(ID_MAQ),
	FOREIGN KEY(ID_NS) REFERENCES NS_MAQ(ID_NS),
	FOREIGN KEY(ID_FUNC) REFERENCES FUNC(ID_FUNC)
)

CREATE TABLE ESTOQUE(
	ID_ESTOQUE INT AUTO_INCREMENT,
	ID_MOV INT NOT NULL,
	ID_MAQ INT NOT NULL ,
	ID_NS INT NOT NULL,	
	EQT_MAQ INT,

	PRIMARY KEY(ID_ESTOQUE),
	FOREIGN KEY(ID_MAQ) REFERENCES MAQ(ID_MAQ),
	FOREIGN KEY(ID_NS) REFERENCES NS_MAQ(ID_NS),
	FOREIGN KEY(ID_MOV) REFERENCES MOVIMENTACAO(ID_MOV)
)
